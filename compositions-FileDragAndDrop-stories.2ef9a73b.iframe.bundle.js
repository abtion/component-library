/*! For license information please see compositions-FileDragAndDrop-stories.2ef9a73b.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunkabtion_component_library=globalThis.webpackChunkabtion_component_library||[]).push([[461],{"./stories/compositions/FileDragAndDrop.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>FileDragAndDrop_stories});var react=__webpack_require__("./node_modules/react/index.js");const esm_CloudArrowUpIcon=react.forwardRef((function CloudArrowUpIcon({title,titleId,...props},svgRef){return react.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,react.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6 6 0 0 0-5.98 6.496A5.25 5.25 0 0 0 6.75 20.25H18a4.5 4.5 0 0 0 2.206-8.423 3.75 3.75 0 0 0-4.133-4.303A6.001 6.001 0 0 0 10.5 3.75Zm2.03 5.47a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72v4.94a.75.75 0 0 0 1.5 0v-4.94l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z",clipRule:"evenodd"}))}));const esm_XCircleIcon=react.forwardRef((function XCircleIcon({title,titleId,...props},svgRef){return react.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,react.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}));var FileInput=__webpack_require__("./components/FileInput/index.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const allowedFileTypes=["image/png","image/jpeg","image/jpg","image/gif","image/bmp","image/webp","application/pdf",".xls",".xlsx",".doc",".docx","text/csv"],FileDragAndDrop=props=>{const{onFilesChange,onErrors,...restProps}=props,[isOver,setIsOver]=(0,react.useState)(!1),[files,setFiles]=(0,react.useState)([]),[errors,setErrors]=(0,react.useState)(""),sanitizeAddFiles=newFiles=>{setErrors("");const filesToAdd=[];newFiles.forEach((f=>{f.size>10485760?setErrors(`${f.name} - overstiger max filstÃ¸rrelse (10 MB)`):files.length+filesToAdd.length>=8?setErrors("Max antal filer overskredet (8)"):filesToAdd.push(new File([f],function getUniqueFilename(files,newFile){const originalName=newFile.name,nameParts=originalName.split("."),extension=nameParts.length>1?`.${nameParts.pop()}`:"",baseName=nameParts.join(".");let uniqueName=originalName,counter=1;const fileExists=name=>files.some((file=>file.name===name));for(;fileExists(uniqueName);)uniqueName=`${baseName}_${counter}${extension}`,counter++;return uniqueName}([...filesToAdd,...files],f),{type:f.type,lastModified:f.lastModified}))})),setFiles((prev=>[...prev,...filesToAdd]))};return(0,react.useEffect)((()=>{onFilesChange?.(files)}),[files,onFilesChange]),(0,react.useEffect)((()=>onErrors?.(errors)),[errors,onErrors]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("div",{onDragOver:event=>{event.preventDefault(),setIsOver(!0)},onDragLeave:event=>{event.preventDefault(),setIsOver(!1)},onDrop:event=>{event.preventDefault(),setIsOver(!1);const droppedFiles=Array.from(event.dataTransfer.files);sanitizeAddFiles(droppedFiles)},className:"w-full justify-center flex flex-col items-center rounded-10px border "+(isOver?"bg-primary-200":"bg-white"),...restProps,children:[(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center my-4",children:[(0,jsx_runtime.jsx)(esm_CloudArrowUpIcon,{className:"w-[60px] h-[60px] text-neutral-500 mb-4"}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-1",children:[(0,jsx_runtime.jsx)("p",{className:"text-neutral",children:"Drag files here or"}),(0,jsx_runtime.jsx)(FileInput.A,{onChangeHandler:files=>sanitizeAddFiles(files),className:"hidden",allowedFileTypes,element:(0,jsx_runtime.jsx)("p",{className:"underline underline-offset-4",children:"browse"})})]}),(0,jsx_runtime.jsx)("p",{className:"text-neutral",children:"Max 10 mb per file"})]}),(0,jsx_runtime.jsx)("div",{className:"flex flex-col w-full",children:files.length>0?files.map(((f,i)=>(0,jsx_runtime.jsxs)("div",{className:"px-5 py-2.5 flex justify-between items-center",children:[(0,jsx_runtime.jsx)("p",{className:"w-11/12",children:f.name}),(0,jsx_runtime.jsx)("div",{className:"h-6 w-6",children:(0,jsx_runtime.jsx)(esm_XCircleIcon,{className:"cursor-pointer w-full h-full",onClick:()=>{setErrors(""),setFiles((prev=>prev.filter((p=>p.name!==f.name))))}})})]},i))):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})})]})})};try{FileDragAndDrop.displayName="FileDragAndDrop",FileDragAndDrop.__docgenInfo={description:"",displayName:"FileDragAndDrop",props:{onFilesChange:{defaultValue:null,description:"",name:"onFilesChange",required:!1,type:{name:"((files: File[]) => void)"}},onErrors:{defaultValue:null,description:"",name:"onErrors",required:!1,type:{name:"((error: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/FileDragAndDrop/index.tsx#FileDragAndDrop"]={docgenInfo:FileDragAndDrop.__docgenInfo,name:"FileDragAndDrop",path:"components/FileDragAndDrop/index.tsx#FileDragAndDrop"})}catch(__react_docgen_typescript_loader_error){}const FileDragAndDrop_stories={title:"Compositions/FileDragAndDrop",component:FileDragAndDrop},Default={args:{onFilesChange:files=>console.log("onFilesChange",{files}),onErrors:str=>console.log("onErrors",{str})},decorators:[Story=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(Story,{}),(0,jsx_runtime.jsx)("p",{className:"mt-4 text-primary-600 text-center",children:"This component uses the FileInput component"})]})]};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  args: {\n    onFilesChange: files => console.log("onFilesChange", {\n      files\n    }),\n    onErrors: str => console.log("onErrors", {\n      str\n    })\n  },\n  decorators: [Story => <div>\n        <Story />\n        <p className="mt-4 text-primary-600 text-center">\n          This component uses the FileInput component\n        </p>\n      </div>]\n}',...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./components/FileInput/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>FileInput});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function FileInput(props){const{onChangeHandler,element,allowedFileTypes=["audio/*","video/*","image/*",".docx",".doc",".zip",".rar"],className,...restInputProps}=props,usedClassName=classnames__WEBPACK_IMPORTED_MODULE_1___default()("Button",className),inputRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{ref:inputRef,type:"file",name:"file",onChange:event=>{event.target.files&&0!==event.target.files.length&&(onChangeHandler(Array.from(event.target.files)),event.target.value="")},className:usedClassName,accept:allowedFileTypes.join(","),multiple:!0,"data-testid":"file-upload-id",...restInputProps}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:restInputProps.disabled?"cursor-not-allowed":"cursor-pointer",onClick:()=>inputRef?.current?.click(),children:element})]})}try{FileInput.displayName="FileInput",FileInput.__docgenInfo={description:"",displayName:"FileInput",props:{onChangeHandler:{defaultValue:null,description:"",name:"onChangeHandler",required:!0,type:{name:"(files: File[]) => void"}},element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},allowedFileTypes:{defaultValue:null,description:"",name:"allowedFileTypes",required:!0,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/FileInput/index.tsx#FileInput"]={docgenInfo:FileInput.__docgenInfo,name:"FileInput",path:"components/FileInput/index.tsx#FileInput"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/classnames/index.js":(module,exports)=>{var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes="",i=0;i<arguments.length;i++){var arg=arguments[i];arg&&(classes=appendClass(classes,parseValue(arg)))}return classes}function parseValue(arg){if("string"==typeof arg||"number"==typeof arg)return arg;if("object"!=typeof arg)return"";if(Array.isArray(arg))return classNames.apply(null,arg);if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes("[native code]"))return arg.toString();var classes="";for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&(classes=appendClass(classes,key));return classes}function appendClass(value,newClass){return newClass?value?value+" "+newClass:value+newClass:value}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}}]);