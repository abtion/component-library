"use strict";(globalThis.webpackChunkabtion_component_library=globalThis.webpackChunkabtion_component_library||[]).push([[241],{"./stories/components/CodeInput.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>CodeInput_stories});var react=__webpack_require__("./node_modules/react/index.js");function LockClosedIcon({title,titleId,...props},svgRef){return react.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,react.createElement("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z",clipRule:"evenodd"}))}const esm_LockClosedIcon=react.forwardRef(LockClosedIcon);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const focusInputByRef=inputRef=>{const inputElement=inputRef.current;inputElement&&(inputElement.focus(),inputElement.select())},CodeInput=(0,react.forwardRef)((({deliveryMethod,className,listenForOTC},ref)=>{const[code,setCode]=(0,react.useState)(Array(6).fill("")),otcAbortControllerRef=(0,react.useRef)(),inputRefs=(0,react.useRef)(Array(6).fill("*").map((()=>(0,react.createRef)()))).current;return(0,react.useEffect)((()=>{if(!listenForOTC)return;if(!("OTPCredential"in window))return;const abortController=new AbortController;return navigator.credentials.get({otp:{transport:["sms"]},signal:abortController.signal}).then((otp=>{otp&&setCode(otp.code.split(""))})).catch((error=>{"Aborted"!==error?.message&&console.error(error)})),otcAbortControllerRef.current=abortController,()=>otcAbortControllerRef.current?.abort(new Error("Aborted"))}),[listenForOTC,setCode]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:`flex h-20 bg-neutral-100 relative border-t border-b border-neutral-300 ${className??""}`,ref,children:[(0,jsx_runtime.jsxs)("label",{htmlFor:"digit1",className:"px-5 flex items-center justify-center",children:[(0,jsx_runtime.jsx)(esm_LockClosedIcon,{name:"lock",className:"w-6 h-6"}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"hidden lg:block self-center pl-5 pr-12 text-sm whitespace-nowrap text-neutral-500",children:"Write your code"}),(0,jsx_runtime.jsxs)("span",{className:"hidden lg:block self-center pl-5 pr-12 text-xs whitespace-nowrap text-neutral-400",children:["Code delivered by"," ",""+("SMS"===deliveryMethod?"sms":"e-mail")]})]})]}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-6 grow text-sm text-neutral-500",children:Array.from({length:6}).map(((_,index)=>(0,jsx_runtime.jsx)("input",{type:"text",id:`digit${index}`,placeholder:"*",pattern:"[a-z0-9]",autoCapitalize:"none",className:"border-l border-neutral-300 text-center bg-neutral-100 focus:z-10 focus:placeholder:text-transparent",onFocus:event=>event.target.select(),autoComplete:"one-time-code",onInput:event=>((index,event)=>{const{currentTarget:{value:string}}=event,charsToInsert=string.substring(0,6-index).split(""),newValue=[...code];newValue.splice(index,charsToInsert.length,...charsToInsert),setCode(newValue),focusInputByRef(inputRefs[Math.min(5,index+charsToInsert.length)])})(index,event),onKeyDown:event=>((index,event)=>{switch(event.key){case"ArrowLeft":event.preventDefault(),focusInputByRef(inputRefs[Math.max(0,index-1)]);break;case"ArrowRight":event.preventDefault(),focusInputByRef(inputRefs[Math.min(5,index+1)]);break;case"Backspace":{event.preventDefault();const newValue=[...code];newValue[index]="",setCode(newValue),focusInputByRef(inputRefs[Math.max(0,index-1)]);break}}})(index,event),ref:inputRefs[index],value:code[index]},index)))})]}),(0,jsx_runtime.jsxs)("span",{className:"block lg:hidden self-center text-center my-2 text-xs whitespace-nowrap text-neutral-400",children:["Code delivered by ",""+("SMS"===deliveryMethod?"sms":"e-mail")]})]})}));CodeInput.displayName="CodeInput";try{CodeInput.displayName="CodeInput",CodeInput.__docgenInfo={description:"",displayName:"CodeInput",props:{deliveryMethod:{defaultValue:null,description:"",name:"deliveryMethod",required:!1,type:{name:"enum",value:[{value:'"SMS"'},{value:'"Email"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},listenForOTC:{defaultValue:null,description:"",name:"listenForOTC",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/CodeInput/index.tsx#CodeInput"]={docgenInfo:CodeInput.__docgenInfo,name:"CodeInput",path:"components/CodeInput/index.tsx#CodeInput"})}catch(__react_docgen_typescript_loader_error){}const CodeInput_stories={title:"Toolbox/CodeInput",component:CodeInput},Default={args:{deliveryMethod:"SMS",listenForOTC:!1}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  args: {\n    deliveryMethod: "SMS",\n    listenForOTC: false\n  }\n}',...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);